<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>CraftyDungeonTest</title>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="assets/js/crafty/crafty-min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() { Crafty.init(640,480).canvas.init(); Crafty.background("black"); startGame(); });
    </script>
    <script type="text/javascript" src='components/player_controls.js'></script>
    <script type="text/javascript" src='components/slide.js'></script>
    <script type="text/javascript" src='components/ai.js'></script>
    <script type="text/javascript" src="components/camera.js"></script>
    <script type="text/javascript" src="components/solid.js"></script>
    <script type="text/javascript" src='scenes/loading.js'></script>

    <script type="text/javascript">
        function startGame() {
            Crafty.scene("main",function() {
                Crafty.background("#000");
                loadMap("levels/map1.tsv",function(level) {
                    var player = Crafty.e("2D, Canvas, PlayerControls, Slide, hero1, Solid")
                        .attr({x:32, y:11 * 32, z: 1})
                        .onHit("Enemy",function(hit) {
                            this.cancelSlide();
                            hit[0].obj.destroy()
                    });

                    var camera = Crafty.e("Camera").camera(player);

                    populateLevel(0.05, level);
                });
            });

            Crafty.scene("loading");

        }

    </script>
</head>
<body>

</body>
</html>